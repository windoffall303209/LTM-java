<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Auction System</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="css/style.css" />
    <style>
      .navbar {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1000;
        transition: all 0.3s ease;
      }

      body {
        padding-top: 70px;
      }

      /* Ribbon for pending auctions */
      .ribbon-wrapper {
        width: 85px;
        height: 88px;
        overflow: hidden;
        position: absolute;
        top: -3px;
        right: -3px;
        z-index: 10;
      }

      .ribbon {
        font-size: 11px;
        font-weight: bold;
        color: #333;
        text-align: center;
        transform: rotate(45deg);
        position: relative;
        padding: 7px 0;
        left: -5px;
        top: 15px;
        width: 120px;
        box-shadow: 0 4px 6px rgba(0,0,0,.1);
      }

      .card.border-warning {
        border-width: 2px;
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary" id="mainNav">
      <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="dashboard.html">üî® Auction System</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link active fw-semibold" href="dashboard.html">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white fw-semibold" href="my-bids.html">L·ªãch S·ª≠ ƒê·∫•u Gi√°</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white fw-semibold" href="watchlist.html">Theo D√µi</a>
            </li>
            <!-- Admin Menu -->
            <li class="nav-item" id="adminMenu" style="display: none;">
              <a class="nav-link text-warning fw-bold" href="admin/dashboard.html">
                üëë Qu·∫£n Tr·ªã
              </a>
            </li>
          </ul>
          <ul class="navbar-nav">
            <!-- User Balance -->
            <li class="nav-item d-none d-lg-block">
              <span class="nav-link text-white">
                <strong>üí∞ <span id="userBalance">0 VND</span></strong>
              </span>
            </li>
            <!-- Username with Dropdown -->
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <strong>üë§ <span id="userName">User</span></strong>
                <span id="userRole" class="badge bg-info ms-1">USER</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li class="dropdown-header">
                  <strong>Th√¥ng tin t√†i kho·∫£n</strong>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                  <span class="dropdown-item-text">
                    <small class="text-muted">T√™n ƒë·∫ßy ƒë·ªß:</small><br/>
                    <strong id="dropdownFullName">Full Name</strong>
                  </span>
                </li>
                <li>
                  <span class="dropdown-item-text">
                    <small class="text-muted">Email:</small><br/>
                    <strong id="dropdownEmail">email@example.com</strong>
                  </span>
                </li>
                <li>
                  <span class="dropdown-item-text">
                    <small class="text-muted">S·ªë d∆∞:</small><br/>
                    <strong class="text-success" id="dropdownBalance">0 VND</strong>
                  </span>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                  <div class="px-2">
                    <button onclick="handleLogout(event)" class="btn btn-danger btn-sm w-100">
                      <i class="bi bi-box-arrow-right"></i> ƒêƒÉng xu·∫•t
                    </button>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid py-4">
      <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3">
          <div class="card">
            <div class="card-header bg-primary text-white">
              <h5 class="mb-0">B·ªô l·ªçc</h5>
            </div>
            <div class="card-body">
              <div class="mb-3">
                <label class="form-label">T√¨m ki·∫øm</label>
                <input
                  type="text"
                  class="form-control"
                  id="searchInput"
                  placeholder="Nh·∫≠p t·ª´ kh√≥a..."
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Tr·∫°ng th√°i</label>
                <select class="form-select" id="statusFilter" onchange="applyFilters()">
                  <option value="" selected>T·∫•t c·∫£</option>
                  <option value="ACTIVE">ƒêang di·ªÖn ra</option>
                  <option value="PENDING">S·∫Øp di·ªÖn ra</option>
                  <option value="ENDED">ƒê√£ k·∫øt th√∫c</option>
                </select>
              </div>
              <button class="btn btn-primary w-100" onclick="applyFilters()">
                √Åp d·ª•ng
              </button>
            </div>
          </div>

          <!-- Statistics -->
          <div class="card mt-3">
            <div class="card-header bg-success text-white">
              <h5 class="mb-0">Th·ªëng k√™</h5>
            </div>
            <div class="card-body">
              <div class="d-flex justify-content-between mb-2">
                <span>T·ªïng s·ªë ƒë·∫•u gi√°:</span>
                <strong id="totalCount">0</strong>
              </div>
              <div class="d-flex justify-content-between mb-2">
                <span>ƒêang di·ªÖn ra:</span>
                <strong id="activeCount" class="text-success">0</strong>
              </div>
              <div class="d-flex justify-content-between mb-2">
                <span>S·∫Øp di·ªÖn ra:</span>
                <strong id="pendingCount" class="text-warning">0</strong>
              </div>
              <div class="d-flex justify-content-between">
                <span>ƒê√£ k·∫øt th√∫c:</span>
                <strong id="endedCount" class="text-muted">0</strong>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-9">
          <h2 class="mb-4">üî® Danh S√°ch C√°c Cu·ªôc ƒê·∫•u Gi√°</h2>

          <div class="row g-4" id="auctionsList">
            <!-- Auctions will be loaded here via JavaScript -->
            <div class="col-12 text-center">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
          </div>

          <div id="noAuctions" class="text-center py-5" style="display: none">
            <h4 class="text-muted">Kh√¥ng t√¨m th·∫•y cu·ªôc ƒë·∫•u gi√° n√†o</h4>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.6.1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/header.js"></script>
    <script src="js/dashboard.js"></script>
  </body>
</html>
