<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ƒêƒÉng K√Ω - Auction System</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        padding: 20px 0;
      }
      .register-card {
        max-width: 500px;
        border-radius: 15px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-7">
          <div class="card register-card">
            <div class="card-body p-5">
              <div class="text-center mb-4">
                <h2 class="fw-bold">üî® ƒêƒÉng K√Ω T√†i Kho·∫£n</h2>
                <p class="text-muted">T·∫°o t√†i kho·∫£n ƒë·ªÉ b·∫Øt ƒë·∫ßu ƒë·∫•u gi√°</p>
              </div>

              <!-- Register Form -->
              <form id="registerForm">
                <div class="mb-3">
                  <label for="username" class="form-label">Username *</label>
                  <input
                    type="text"
                    class="form-control"
                    id="username"
                    required
                    minlength="3"
                    maxlength="50"
                    placeholder="Nh·∫≠p username (3-50 k√Ω t·ª±)"
                  />
                  <div class="invalid-feedback">
                    Username ph·∫£i t·ª´ 3-50 k√Ω t·ª±
                  </div>
                </div>

                <div class="mb-3">
                  <label for="email" class="form-label">Email *</label>
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    required
                    placeholder="Nh·∫≠p email"
                  />
                  <div class="invalid-feedback">Email kh√¥ng h·ª£p l·ªá</div>
                </div>

                <div class="mb-3">
                  <label for="fullName" class="form-label">H·ªç v√† T√™n</label>
                  <input
                    type="text"
                    class="form-control"
                    id="fullName"
                    placeholder="Nh·∫≠p h·ªç v√† t√™n (t√πy ch·ªçn)"
                  />
                </div>

                <div class="mb-3">
                  <label for="password" class="form-label">Password *</label>
                  <input
                    type="password"
                    class="form-control"
                    id="password"
                    required
                    minlength="6"
                    placeholder="Nh·∫≠p password (t·ªëi thi·ªÉu 6 k√Ω t·ª±)"
                  />
                  <div class="invalid-feedback">
                    Password ph·∫£i √≠t nh·∫•t 6 k√Ω t·ª±
                  </div>
                </div>

                <div class="mb-3">
                  <label for="confirmPassword" class="form-label"
                    >X√°c nh·∫≠n Password *</label
                  >
                  <input
                    type="password"
                    class="form-control"
                    id="confirmPassword"
                    required
                    placeholder="Nh·∫≠p l·∫°i password"
                  />
                  <div class="invalid-feedback">Password kh√¥ng kh·ªõp</div>
                </div>

                <div class="alert alert-info small">
                  <strong>L∆∞u √Ω:</strong> Sau khi ƒëƒÉng k√Ω, b·∫°n s·∫Ω nh·∫≠n
                  10.000.000 VND ƒë·ªÉ ƒë·∫•u gi√°!
                </div>

                <button type="submit" class="btn btn-primary btn-lg w-100 mb-3">
                  ƒêƒÉng k√Ω
                </button>

                <div class="text-center">
                  <p class="mb-0">
                    ƒê√£ c√≥ t√†i kho·∫£n?
                    <a href="/login" class="text-decoration-none fw-bold"
                      >ƒêƒÉng nh·∫≠p</a
                    >
                  </p>
                  <a href="/" class="text-muted small">‚Üê Quay v·ªÅ trang ch·ªß</a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document
        .getElementById("registerForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const username = document.getElementById("username").value;
          const email = document.getElementById("email").value;
          const fullName = document.getElementById("fullName").value;
          const password = document.getElementById("password").value;
          const confirmPassword =
            document.getElementById("confirmPassword").value;

          // Validate password match
          if (password !== confirmPassword) {
            alert("Password kh√¥ng kh·ªõp!");
            return;
          }

          try {
            const response = await fetch("/api/auth/register", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                username,
                email,
                fullName,
                password,
                confirmPassword,
              }),
            });

            const result = await response.json();

            if (result.success) {
              alert("ƒêƒÉng k√Ω th√†nh c√¥ng! Vui l√≤ng ƒëƒÉng nh·∫≠p.");
              window.location.href = "/login";
            } else {
              alert("L·ªói: " + result.message);
            }
          } catch (error) {
            alert("C√≥ l·ªói x·∫£y ra: " + error.message);
          }
        });
    </script>
  </body>
</html>
